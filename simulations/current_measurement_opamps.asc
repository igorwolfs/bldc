Version 4
SHEET 1 3732 1120
WIRE 656 -1568 656 -1600
WIRE -2192 -1456 -2192 -1488
WIRE -2640 -1328 -2736 -1328
WIRE -2544 -1312 -2576 -1312
WIRE -2640 -1296 -2688 -1296
WIRE -2528 -1280 -2576 -1280
WIRE -2768 -1264 -2768 -1312
WIRE -2640 -1264 -2768 -1264
WIRE -2528 -1264 -2528 -1280
WIRE -2496 -1264 -2496 -1280
WIRE -2496 -1264 -2528 -1264
WIRE -2448 -1264 -2496 -1264
WIRE -2256 -1264 -2368 -1264
WIRE -2192 -1248 -2192 -1376
WIRE -2096 -1248 -2192 -1248
WIRE -2544 -1232 -2544 -1312
WIRE -2480 -1232 -2544 -1232
WIRE -2256 -1232 -2256 -1264
WIRE -2192 -1232 -2192 -1248
WIRE -2192 -1232 -2256 -1232
WIRE -2960 -1216 -2960 -1264
WIRE -2736 -1216 -2736 -1328
WIRE -2736 -1216 -2880 -1216
WIRE -2656 -1216 -2736 -1216
WIRE -2192 -1200 -2256 -1200
WIRE 416 -1200 304 -1200
WIRE -16 -1184 -112 -1184
WIRE 64 -1184 -16 -1184
WIRE 240 -1184 144 -1184
WIRE 656 -1184 656 -1296
WIRE 752 -1184 656 -1184
WIRE -2480 -1168 -2480 -1232
WIRE -2448 -1168 -2480 -1168
WIRE -2256 -1168 -2256 -1200
WIRE -2256 -1168 -2368 -1168
WIRE -2192 -1168 -2192 -1200
WIRE -2096 -1168 -2192 -1168
WIRE 368 -1168 304 -1168
WIRE 416 -1168 416 -1200
WIRE 656 -1168 656 -1184
WIRE 656 -1168 416 -1168
WIRE -16 -1152 -16 -1184
WIRE 368 -1136 368 -1168
WIRE 656 -1136 368 -1136
WIRE 272 -1120 272 -1152
WIRE 272 -1120 144 -1120
WIRE 656 -1104 656 -1136
WIRE 752 -1104 656 -1104
WIRE 144 -1040 144 -1120
WIRE -2688 -1024 -2688 -1296
WIRE -2688 -1024 -2768 -1024
WIRE -2656 -1024 -2656 -1216
WIRE -2608 -1024 -2656 -1024
WIRE -2480 -1024 -2480 -1168
WIRE -2480 -1024 -2528 -1024
WIRE 272 -1024 272 -1120
WIRE -2192 -976 -2192 -1168
WIRE 272 -912 272 -944
WIRE 656 -912 656 -1104
WIRE -2144 -336 -2144 -368
WIRE -1104 -336 -1152 -336
WIRE 640 -48 640 -80
WIRE -2384 32 -2496 32
WIRE -2560 48 -2912 48
WIRE -2144 48 -2144 -64
WIRE -2048 48 -2144 48
WIRE -2432 64 -2496 64
WIRE -2384 64 -2384 32
WIRE -2144 64 -2144 48
WIRE -2144 64 -2384 64
WIRE -2432 96 -2432 64
WIRE -2144 96 -2432 96
WIRE -2528 112 -2528 80
WIRE -2528 112 -2656 112
WIRE -2144 128 -2144 96
WIRE -2048 128 -2144 128
WIRE 384 144 352 144
WIRE 576 144 464 144
WIRE 640 160 640 32
WIRE 736 160 640 160
WIRE 336 176 336 128
WIRE 336 176 304 176
WIRE 352 176 352 144
WIRE 352 176 336 176
WIRE 576 176 576 144
WIRE 640 176 640 160
WIRE 640 176 576 176
WIRE -2656 192 -2656 112
WIRE -128 192 -128 144
WIRE 176 192 -48 192
WIRE 240 192 176 192
WIRE -2528 208 -2528 112
WIRE 352 208 304 208
WIRE 640 208 576 208
WIRE 352 240 352 208
WIRE 384 240 352 240
WIRE 576 240 576 208
WIRE 576 240 464 240
WIRE 640 240 640 208
WIRE 736 240 640 240
WIRE -2528 320 -2528 288
WIRE -2144 320 -2144 128
WIRE 176 384 176 192
WIRE 352 384 352 240
WIRE 352 384 304 384
WIRE 640 432 640 240
FLAG 640 -80 0
FLAG 640 432 0
FLAG -128 144 0
FLAG 272 160 0
FLAG 272 304 0
FLAG 336 48 0
FLAG 640 240 V1
FLAG 640 176 V2
FLAG -2144 -368 0
FLAG -2144 320 0
FLAG -2144 128 V1
FLAG -2144 64 V2
FLAG -2528 400 0
FLAG -2656 256 0
FLAG -2528 16 0
FLAG -2144 -256 SIG
FLAG -2144 -144 SIG
FLAG -2912 48 VOUT
FLAG 656 -1600 0
FLAG 656 -912 0
FLAG 656 -1104 V1
FLAG 656 -1168 V2
FLAG 272 -832 0
FLAG 144 -976 0
FLAG 272 -1216 0
FLAG 656 -1488 SIG
FLAG 656 -1376 SIG
FLAG -16 -1088 0
FLAG -112 -1184 VOUT
FLAG -2192 -1488 0
FLAG -2192 -976 0
FLAG -2960 -1264 0
FLAG -2496 -1360 0
FLAG -2192 -1168 V1
FLAG -2192 -1232 V2
FLAG -2768 -1392 0
FLAG -2768 -1104 0
SYMBOL lmx24 272 256 R180
WINDOW 3 31 148 Left 2
SYMATTR Value LMX24_LM2902
SYMATTR InstName U1
SYMATTR Prefix ""
SYMBOL current 640 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value SINE(0 20 1000 0 0 0 1000)
SYMBOL res 752 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rshunt
SYMATTR Value 1m
SYMBOL res -144 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Rinf
SYMATTR Value 1000000
SYMBOL voltage 272 208 R0
WINDOW 0 24 96 Left 2
WINDOW 3 42 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL res 480 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2k
SYMBOL res 480 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName 1k
SYMATTR Value 2k
SYMBOL res 320 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rf
SYMATTR Value 20k
SYMBOL res 320 32 R0
SYMATTR InstName Rg
SYMATTR Value 20k
SYMBOL res -2032 144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rshunt1
SYMATTR Value 3m
SYMBOL voltage -2528 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL ind -2544 192 R0
SYMATTR InstName Lparasitic1
SYMATTR Value 100µ
SYMBOL cap -2672 192 R0
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL res -2160 -160 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL INA180A2 -2528 112 R180
SYMATTR InstName U2
SYMBOL current -2144 -336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value SINE(0 5 50)
SYMBOL res 768 -1088 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rshunt2
SYMATTR Value 1m
SYMBOL INA180a3 272 -1120 R180
WINDOW 3 41 103 Left 2
SYMATTR Value ina180a3
SYMATTR InstName U3
SYMATTR Prefix ""
SYMBOL voltage 272 -928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3.3
SYMBOL ind 256 -1040 R0
SYMATTR InstName Lparasitic2
SYMATTR Value 100µ
SYMBOL cap 128 -1040 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res 640 -1392 R0
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL voltage 656 -1472 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(0 20 1000 0 0 0 100)
SYMBOL res 160 -1200 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL cap -32 -1152 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL current -2192 -1456 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I3
SYMATTR Value SINE(0 20 100 0 0 0 1000)
SYMBOL res -2080 -1152 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rshunt3
SYMATTR Value 10m
SYMBOL res -2976 -1200 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Rinf1
SYMATTR Value 1000000
SYMBOL voltage -2768 -1296 R180
WINDOW 0 24 96 Left 2
WINDOW 3 42 56 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 10
SYMBOL res -2352 -1280 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -2352 -1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -2512 -1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rf1
SYMATTR Value 20k
SYMBOL res -2512 -1376 R0
SYMATTR InstName Rg1
SYMATTR Value 20k
SYMBOL TL072 -2608 -1296 R180
SYMATTR InstName U4
SYMATTR Prefix ""
SYMBOL voltage -2768 -1120 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 1.5
TEXT 760 104 Right 2 !.tran 0 1s 0 0.1m
TEXT 520 64 Left 2 !.lib lmx24.lib
TEXT 776 144 Left 2 ;Remember: for a differential amplifier Vout = V2. (Rg/(R2+Rg)).((R1+Rf)/R1) - V1.Rf/R1
TEXT 784 200 Left 2 ;Special case: R1 = R2, Rf = Rg -> Vout = (Rf / R1) . (V2 - V1)
TEXT 792 240 Left 2 ;Main problems here: OPAMP doesn't go all the way to ground
TEXT 1040 272 Left 2 ;Deformation around 1 kHz
TEXT -2024 -8 Right 2 !;tran 0 0.1s 0 0.1m
TEXT -2576 -192 Left 2 !.lib ina180a2.lib
TEXT -2008 32 Left 2 ;Remember: for a differential amplifier Vout = V2. (Rg/(R2+Rg)).((R1+Rf)/R1) - V1.Rf/R1
TEXT -2008 64 Left 2 ;Special case: R1 = R2, Rf = Rg -> Vout = (Rf / R1) . (V2 - V1)
TEXT -2008 144 Left 2 ;2 V / us slew rate, CMV: -0.2-26 V independent of supply! (CRAZY)
TEXT -2008 184 Left 2 ;Gain: 50 V/V (for A2-version), 4 resistors already integrated
TEXT -2936 424 Left 2 !;tran 0 0.1 0 0.1u
TEXT -3000 448 Left 2 !.tran 0 0.1 0 0.0000001
TEXT 776 -1240 Right 2 !;tran 0 0.1s 0 0.1m
TEXT 224 -1424 Left 2 !.lib ina180a3.lib
TEXT 792 -1200 Left 2 ;Remember: for a differential amplifier Vout = V2. (Rg/(R2+Rg)).((R1+Rf)/R1) - V1.Rf/R1
TEXT 792 -1168 Left 2 ;Special case: R1 = R2, Rf = Rg -> Vout = (Rf / R1) . (V2 - V1)
TEXT 792 -1088 Left 2 ;2 V / us slew rate, CMV: -0.2-26 V independent of supply! (CRAZY)
TEXT 792 -1048 Left 2 ;Gain: 100 V/V (for A3-version), 4 resistors already integrated
TEXT -136 -808 Left 2 !;tran 0 0.1 0 0.1u
TEXT -80 -1472 Left 2 !.noise V(VOUT) V3 oct 100 100 1e6
TEXT -2072 -1304 Right 2 !.tran 0 1s 0 0.1m
TEXT -2624 -1488 Left 2 !.lib TL072.spi
TEXT -2056 -1264 Left 2 ;Remember: for a differential amplifier Vout = V2. (Rg/(R2+Rg)).((R1+Rf)/R1) - V1.Rf/R1
TEXT -2056 -1232 Left 2 ;Special case: R1 = R2, Rf = Rg -> Vout = (Rf / R1) . (V2 - V1)
TEXT -2056 -1152 Left 2 ;Rf=10k, R2=1k, Rshunt=5mOhm -> in2: -20->-60 uA
TEXT -2064 -1096 Left 2 ;Common mode voltage range: Vcc-+1.5..Vcc+ -> Not valid here, negative rail voltage necessary for somewhat sensible emasurements
TEXT -3072 -448 Left 2 ;INA180A2
TEXT -3088 -1592 Left 2 ;TL072
TEXT -248 -1600 Left 2 ;INA180A3
TEXT -200 -424 Left 2 ;LMX24_LM2902
RECTANGLE Normal -1056 528 -3104 -480 2
RECTANGLE Normal -576 -688 -3152 -1632 2
RECTANGLE Normal 1776 -688 -320 -1680 2
RECTANGLE Normal 1776 528 -272 -480 2
